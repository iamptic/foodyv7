<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Foody ¬∑ –õ–ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</title>
  <link rel="stylesheet" href="./style.css" />
  <script defer src="/config.js"></script>
  <script defer src="./app.js"></script>
</head>
<body>
  <header class="hdr">
    <div class="brand">
      <span class="logo">üçΩÔ∏è</span>
      <span class="title">Foody ¬∑ Merchant</span>
    </div>
    <div class="hdr-actions">
      <button id="langBtn" class="btn ghost">RU/EN</button>
      <button id="exportBtn" class="btn">CSV</button>
    </div>
  </header>

  <main class="container">
    <section class="grid-2">
      <div class="card">
        <div class="card-h">
          <div class="card-t">–î–∞—à–±–æ—Ä–¥</div>
          <div class="card-a">
            <select id="metric">
              <option value="redeems">–ü–æ–≥–∞—à–µ–Ω–∏—è</option>
              <option value="revenue">–í—ã—Ä—É—á–∫–∞</option>
              <option value="offers_created">–°–æ–∑–¥–∞–Ω–æ –æ—Ñ—Ñ–µ—Ä–æ–≤</option>
            </select>
          </div>
        </div>
        <div class="card-b">
          <canvas id="chart" height="180"></canvas>
        </div>
      </div>
      <div class="card">
        <div class="card-h">
          <div class="card-t">–°–æ–∑–¥–∞—Ç—å –æ—Ñ—Ñ–µ—Ä</div>
          <div class="card-a">
            <button id="createBtn" class="btn primary">+ –°–æ–∑–¥–∞—Ç—å</button>
          </div>
        </div>
        <div class="card-b">
          <form id="offerForm" class="form">
            <div class="row">
              <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
              <input name="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –°–µ—Ç —ç–∫–ª–µ—Ä–æ–≤" required />
            </div>
            <div class="row two">
              <div>
                <label>–¶–µ–Ω–∞ (‚ÇΩ)</label>
                <input name="price" type="number" min="0" step="1" required />
              </div>
              <div>
                <label>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (‚ÇΩ)</label>
                <input name="price_old" type="number" min="0" step="1" />
              </div>
            </div>
            <div class="row two">
              <div>
                <label>–ö–æ–ª-–≤–æ –≤—Å–µ–≥–æ</label>
                <input name="qty_total" type="number" min="1" step="1" required />
              </div>
              <div>
                <label>–ö–æ–ª-–≤–æ –æ—Å—Ç–∞–ª–æ—Å—å</label>
                <input name="qty_left" type="number" min="0" step="1" required />
              </div>
            </div>
            <div class="row">
              <label>–ò—Å—Ç–µ–∫–∞–µ—Ç (ISO, –æ–ø—Ü.)</label>
              <input name="expires_at" placeholder="2025-12-31T21:00:00Z" />
            </div>
            <div class="row">
              <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
              <textarea name="description" rows="2" placeholder="–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ..."></textarea>
            </div>

            <div class="row">
              <label>–§–æ—Ç–æ</label>
              <input name="image_url" placeholder="URL —Ñ–æ—Ç–æ (–∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏)" />
              <div id="dropzone" class="dropzone">
                <input type="file" id="fileInput" accept="image/*" hidden />
                <div id="dzPrompt">–ü–µ—Ä–µ—Ç–∞—â–∏ —Ñ–æ—Ç–æ —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å</div>
                <img id="preview" alt="" style="display:none;" />
                <div class="dz-actions">
                  <button type="button" id="uploadBtn" class="btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                </div>
              </div>
            </div>

            <div class="row end">
              <button class="btn primary" id="submitOffer">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ñ—Ñ–µ—Ä</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="card-h">
        <div class="card-t">–ú–æ–∏ –æ—Ñ—Ñ–µ—Ä—ã</div>
        <div class="card-a">
          <input id="search" placeholder="–ü–æ–∏—Å–∫" />
        </div>
      </div>
      <div class="card-b">
        <div id="offers" class="list"></div>
      </div>
    </section>
  </main>

  <!-- Modal Edit -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal__dialog">
      <div class="modal__h">
        <div class="modal__t">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ñ—Ñ–µ—Ä</div>
        <button id="modalClose" class="modal__x">√ó</button>
      </div>
      <div class="modal__b">
        <form id="editForm" class="form">
          <input type="hidden" name="offer_id" />
          <div class="row">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <input name="title" required />
          </div>
          <div class="row two">
            <div>
              <label>–¶–µ–Ω–∞ (‚ÇΩ)</label>
              <input name="price" type="number" min="0" step="1" required />
            </div>
            <div>
              <label>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (‚ÇΩ)</label>
              <input name="price_old" type="number" min="0" step="1" />
            </div>
          </div>
          <div class="row two">
            <div>
              <label>–ö–æ–ª-–≤–æ –≤—Å–µ–≥–æ</label>
              <input name="qty_total" type="number" min="1" step="1" required />
            </div>
            <div>
              <label>–û—Å—Ç–∞–ª–æ—Å—å</label>
              <input name="qty_left" type="number" min="0" step="1" required />
            </div>
          </div>
          <div class="row">
            <label>–ò—Å—Ç–µ–∫–∞–µ—Ç (ISO)</label>
            <input name="expires_at" />
          </div>
          <div class="row">
            <label>–§–æ—Ç–æ (URL)</label>
            <input name="image_url" />
          </div>
          <div class="row">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea name="description" rows="2"></textarea>
          </div>
          <div class="row end">
            <button class="btn primary" id="saveEdit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div id="toast"></div>
</body>
</html>
